<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# ecode

```go
import "github.com/ccheers/xpkg/ecode"
```

## Index

- [Variables](<#variables>)
- [func Equal(a, b Codes) bool](<#func-equal>)
- [func EqualError(code Codes, err error) bool](<#func-equalerror>)
- [func Register(cm map[int]string)](<#func-register>)
- [type Code](<#type-code>)
  - [func Int(i int) Code](<#func-int>)
  - [func New(e int) Code](<#func-new>)
  - [func String(e string) Code](<#func-string>)
  - [func (e Code) Code() int](<#func-code-code>)
  - [func (e Code) Details() []interface{}](<#func-code-details>)
  - [func (e Code) Error() string](<#func-code-error>)
  - [func (e Code) Message() string](<#func-code-message>)
- [type Codes](<#type-codes>)
  - [func Cause(e error) Codes](<#func-cause>)
  - [func FromProto(pbMsg proto.Message) Codes](<#func-fromproto>)
- [type Status](<#type-status>)
  - [func Error(code Code, message string) *Status](<#func-error>)
  - [func Errorf(code Code, format string, args ...interface{}) *Status](<#func-errorf>)
  - [func FromCode(code Code) *Status](<#func-fromcode>)
  - [func (s *Status) Code() int](<#func-status-code>)
  - [func (s *Status) Details() []interface{}](<#func-status-details>)
  - [func (s *Status) Error() string](<#func-status-error>)
  - [func (s *Status) Message() string](<#func-status-message>)
  - [func (s *Status) Proto() *types.Status](<#func-status-proto>)
  - [func (s *Status) WithDetails(pbs ...proto.Message) (*Status, error)](<#func-status-withdetails>)


## Variables

All common ecode

```go
var (
    OK  = add(0) // 正确

    NotModified        = add(-304) // 木有改动
    TemporaryRedirect  = add(-307) // 撞车跳转
    RequestErr         = add(-400) // 请求错误
    Unauthorized       = add(-401) // 未认证
    AccessDenied       = add(-403) // 访问权限不足
    NothingFound       = add(-404) // 啥都木有
    MethodNotAllowed   = add(-405) // 不支持该方法
    Conflict           = add(-409) // 冲突
    Canceled           = add(-498) // 客户端取消请求
    ServerErr          = add(-500) // 服务器错误
    ServiceUnavailable = add(-503) // 过载保护,服务暂不可用
    Deadline           = add(-504) // 服务调用超时
    LimitExceed        = add(-509) // 超出限制
)
```

## func Equal

```go
func Equal(a, b Codes) bool
```

Equal equal a and b by code int.

## func EqualError

```go
func EqualError(code Codes, err error) bool
```

EqualError equal error

## func Register

```go
func Register(cm map[int]string)
```

Register register ecode message map.

## type Code

A Code is an int error code spec.

```go
type Code int
```

### func Int

```go
func Int(i int) Code
```

Int parse code int to error.

### func New

```go
func New(e int) Code
```

New new a ecode.Codes by int value. NOTE: ecode must unique in global, the New will check repeat and then panic.

### func String

```go
func String(e string) Code
```

String parse code string to error.

### func \(Code\) Code

```go
func (e Code) Code() int
```

Code return error code

### func \(Code\) Details

```go
func (e Code) Details() []interface{}
```

Details return details.

### func \(Code\) Error

```go
func (e Code) Error() string
```

### func \(Code\) Message

```go
func (e Code) Message() string
```

Message return error message

## type Codes

Codes ecode error interface which has a code & message.

```go
type Codes interface {
    // sometimes Error return Code in string form
    // NOTE: don't use Error in monitor report even it also work for now
    Error() string
    // Code get error code.
    Code() int
    // Message get code message.
    Message() string
    //Detail get error detail,it may be nil.
    Details() []interface{}
}
```

### func Cause

```go
func Cause(e error) Codes
```

Cause cause from error to ecode.

### func FromProto

```go
func FromProto(pbMsg proto.Message) Codes
```

FromProto new status from grpc detail

## type Status

Status statusError is an alias of a status proto implement ecode.Codes

```go
type Status struct {
    // contains filtered or unexported fields
}
```

### func Error

```go
func Error(code Code, message string) *Status
```

Error new status with code and message

### func Errorf

```go
func Errorf(code Code, format string, args ...interface{}) *Status
```

Errorf new status with code and message

### func FromCode

```go
func FromCode(code Code) *Status
```

FromCode create status from ecode

### func \(\*Status\) Code

```go
func (s *Status) Code() int
```

Code return error code

### func \(\*Status\) Details

```go
func (s *Status) Details() []interface{}
```

Details return error details

### func \(\*Status\) Error

```go
func (s *Status) Error() string
```

Error implement error

### func \(\*Status\) Message

```go
func (s *Status) Message() string
```

Message return error message for developer

### func \(\*Status\) Proto

```go
func (s *Status) Proto() *types.Status
```

Proto return origin protobuf message

### func \(\*Status\) WithDetails

```go
func (s *Status) WithDetails(pbs ...proto.Message) (*Status, error)
```

WithDetails WithDetails



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
