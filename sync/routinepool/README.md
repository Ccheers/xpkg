<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# routinepool

```go
import "github.com/ccheers/xpkg/sync/routinepool"
```

## Index

- [func CtxGo(ctx context.Context, f RoutineFunc)](<#func-ctxgo>)
- [func Go(f RoutineFunc)](<#func-go>)
- [func RegisterPool(p Pool) error](<#func-registerpool>)
- [func SetCap(cap int32)](<#func-setcap>)
- [func SetPanicHandler(f func(context.Context, error))](<#func-setpanichandler>)
- [type Config](<#type-config>)
  - [func NewConfig() *Config](<#func-newconfig>)
- [type Pool](<#type-pool>)
  - [func GetPool(name string) Pool](<#func-getpool>)
  - [func NewPool(name string, cap int32, config *Config) Pool](<#func-newpool>)
- [type RoutineFunc](<#type-routinefunc>)


## func CtxGo

```go
func CtxGo(ctx context.Context, f RoutineFunc)
```

CtxGo is preferred than Go.

## func Go

```go
func Go(f RoutineFunc)
```

Go is an alternative to the go keyword, which is able to recover panic.

```
gopool.Go(func(arg interface{}){
    ...
}(nil))
```

## func RegisterPool

```go
func RegisterPool(p Pool) error
```

RegisterPool registers a new pool to the global map. GetPool can be used to get the registered pool by name. returns error if the same name is registered.

## func SetCap

```go
func SetCap(cap int32)
```

SetCap is not recommended to be called, this func changes the global pool's capacity which will affect other callers.

## func SetPanicHandler

```go
func SetPanicHandler(f func(context.Context, error))
```

SetPanicHandler sets the panic handler for the global pool.

## type Config

Config is used to config pool.

```go
type Config struct {
    // threshold for scale.
    // new goroutine is created if len(task chan) > ScaleThreshold.
    // defaults to defaultScalaThreshold.
    ScaleThreshold int32
}
```

### func NewConfig

```go
func NewConfig() *Config
```

NewConfig creates a default Config.

## type Pool

```go
type Pool interface {
    // Name returns the corresponding pool name.
    Name() string
    // SetCap sets the goroutine capacity of the pool.
    SetCap(cap int32)
    // Go executes f.
    Go(f RoutineFunc) error
    // CtxGo executes f and accepts the context.
    CtxGo(ctx context.Context, f RoutineFunc) error
    // SetPanicHandler sets the panic handler.
    SetPanicHandler(f func(context.Context, error))
    // Stop the Pool graceful
    Stop(ctx context.Context) error
}
```

### func GetPool

```go
func GetPool(name string) Pool
```

GetPool gets the registered pool by name. Returns nil if not registered.

### func NewPool

```go
func NewPool(name string, cap int32, config *Config) Pool
```

NewPool creates a new pool with the given name, cap and config.

## type RoutineFunc

```go
type RoutineFunc func(context.Context)
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
