<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# pipeline

```go
import "github.com/ccheers/xpkg/sync/pipeline"
```

## Index

- [Variables](<#variables>)
- [type Aggregation](<#type-aggregation>)
  - [func NewPipeline(config *Config) (res *Aggregation)](<#func-newpipeline>)
  - [func (p *Aggregation) Add(c context.Context, key string, value interface{}) (err error)](<#func-aggregation-add>)
  - [func (p *Aggregation) Close() (err error)](<#func-aggregation-close>)
  - [func (p *Aggregation) Start()](<#func-aggregation-start>)
  - [func (p *Aggregation) SyncAdd(c context.Context, key string, value interface{}) (err error)](<#func-aggregation-syncadd>)
- [type Config](<#type-config>)


## Variables

ErrFull channel full error

```go
var ErrFull = errors.New("channel full")
```

## type Aggregation

Aggregation pipeline struct

```go
type Aggregation struct {
    Do    func(c context.Context, index int, values map[string][]interface{})
    Split func(key string) int
    // contains filtered or unexported fields
}
```

### func NewPipeline

```go
func NewPipeline(config *Config) (res *Aggregation)
```

NewPipeline new pipline

### func \(\*Aggregation\) Add

```go
func (p *Aggregation) Add(c context.Context, key string, value interface{}) (err error)
```

Add async add a value to channal, channel shard in split method

### func \(\*Aggregation\) Close

```go
func (p *Aggregation) Close() (err error)
```

Close all goroutinue

### func \(\*Aggregation\) Start

```go
func (p *Aggregation) Start()
```

Start start all mergeproc

### func \(\*Aggregation\) SyncAdd

```go
func (p *Aggregation) SyncAdd(c context.Context, key string, value interface{}) (err error)
```

SyncAdd sync add a value to channal, channel shard in split method

## type Config

Config Aggregation config

```go
type Config struct {
    // MaxSize merge size
    MaxSize int
    // Interval merge interval
    Interval xtime.Duration
    // Buffer channel size
    Buffer int
    // Worker channel number
    Worker int
    // Name use for metrics
    Name string
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
